dockerCompose {
    useComposeFiles = ["${projectDir}/gradle/docker-compose/docker-compose.yml"]
    projectName = 'homework_dev'
    mongoTest {
        useComposeFiles = ["${projectDir}/gradle/docker-compose/mongo-test-docker-compose.yml"]
        projectName = 'homework_dev_mongo_test'
    }
}

bootRun.dependsOn composeUp //与isRequiredBy不同的是：使用dependsOn在关闭bootRun后MySQL不会停止，因此本地开发不用反复启动MySQL
dockerDown.dependsOn composeDown

check.dependsOn mongoTestComposeUp
mongoTestComposeDown
        {
            shouldRunAfter check
        }
build.dependsOn mongoTestComposeDown
dockerDown.dependsOn mongoTestComposeDown