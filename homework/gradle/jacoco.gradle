task jacocoAllTestReport(type: JacocoReport) {
    shouldRunAfter check
    executionData test, apiTest, componentTest
    sourceSets sourceSets.main
    reports {
        html.enabled false
        xml.enabled true
    }
}

task jacocoAllTestCoverageVerification(type: JacocoCoverageVerification) {
    shouldRunAfter jacocoAllTestReport
    executionData test, componentTest, apiTest
    sourceSets sourceSets.main
    violationRules {
        rule {
            element = 'BUNDLE'
            limit {
                counter = 'INSTRUCTION'
                minimum = 0.68
            }
        }
        rule {
            element = 'BUNDLE'
            limit {
                counter = 'BRANCH'
                minimum = 0.00
            }
        }
    }
}

build.dependsOn jacocoAllTestReport
build.dependsOn jacocoAllTestCoverageVerification